## 1.7 PCB와 Context Switching

[👉🏻 참고자료가 포함된 노션 정리본](https://www.notion.so/yxhwxn/1-7-PCB-Context-Switching-17c20d7de678802bba8dc3cef3a9a3fd)

</br>

### 1. Context Switching이란 무엇이며, 언제 발생하나요?

> 답변

> 멀티 프로세싱 환경이나 멀티 스레딩 환경에서 사용되는 개념이라고 알고 있습니다. 단일 코어 기준으로 CPU는 하나의 중요한 자원이기 때문에, 운영체제는 해당 자원을 적절히 배치하여 멀티 태스킹 환경을 지원하는 역할을 합니다. 이 때, CPU 스케줄링에 의해 CPU를 선점하는 프로세스가 계속 달라지게 되는데요, 이러한 매커니즘을 운영체제의 Context Switching이라고 합니다. 방금 말씀드렸던 CPU 스케쥴링에서 타이머 인터럽트라는 트리거로 발생하기도 하고, 비선점형 스케줄링의 경우에는 하드웨어 인터럽트나, 시스템 콜의 호출로 발생한다고 알고 있습니다.

</br>

### 2. PCB가 문맥 전환(Context Switching) 과정에서 어떻게 활용되나요?

> 답변

> Context Switching은 기본적으로 실행중인 프로세스를 전환하는 과정이기 때문에, 실행중이던 해당 프로세스의 정보값을 저장해두고 다른 프로세스의 정보를 복원해야 합니다. 이 때 사용하는 데이터 구조체를 PCB, Process Control Block이라고 합니다. 실행중이던 프로세스 A가 B로 전환될 때 상황을 가정해보겠습니다. 운영체제는 프로세스 A의 PID 값과 Running 상태인지, Ready 상태인지에 대한 Process state 값, 그리고 실행중이던 상태 정보를 저장하기 위해 PC와 SP, 그리고 연산과정에서 사용된 변수값들이 저장되어 있는 GPR 레지스터 값들을 PCB에 저장하고, 다른 프로세스 B의 PCB 정보를 불러오면서 Context Switching 과정이 일어나게 됩니다.

</br>

### 3. 문맥 전환 오버헤드를 줄이기 위한 최적화 방법을 설명하세요.

> 답변

> 어느 상황에서 발생하는 문맥 전환인가에 따라 다를 거 같은데요, 라운드 로빈 같은 선점형 스케줄링 알고리즘을 사용하는 경우엔, CPU 중심 프로세스에는 긴 타임 퀀텀을 주고 I/O 작업이 빈번하게 일어나는 프로세스한테는 짧은 타임 퀀텀을 주는 방식으로 타이머 인터럽트로 인한 context switching이 빈번하게 발생하지 않도록 하는 방법이 있을 거 같습니다.
> 또한, 멀티프로세싱보단 멀티스레딩 방식으로 설계하게 된다면 스레드는 Code, Data, Heap 영역같은 메모리 공간을 공유하기 때문에, MMU의 재설정이 필요하지 않아 속도가 더 빨라질 것 같습니다.

</br>
