### 시스템 콜

### 시스템 콜(System Call)이란 무엇이며, 왜 필요한가요?

- 사용자 프로그램이 OS 서비스를 요청하는 인터페이스.
- 이유: 사용자 프로그램은 커널 자원에 직접 접근할 수 없음.

### 사용자 모드와 커널 모드 간의 전환

- **트랩(Trap)** 명령으로 전환.
- 사용자 모드 → 커널 모드: 시스템 콜 요청
- 커널 모드 → 사용자 모드: 요청 처리 후 복귀

### 라이브러리 함수와 시스템 콜의 차이

- **라이브러리 함수**: 사용자 영역에서 실행, OS와의 직접 인터페이스는 아님.
- **시스템 콜**: 커널 호출로 OS 서비스 수행.

### **시스템 콜의 주요 분류**

### **프로세스 제어 (Process Control)**

- 프로세스 생성, 종료, 상태 변경과 관련된 시스템 콜.
- **예제**:
  - **fork()**: 프로세스 복제.
  - **exec()**: 새로운 프로그램 실행.
  - **exit()**: 프로세스 종료.
  - **wait()**: 자식 프로세스 종료를 대기.
  - **getpid()**: 현재 프로세스 ID 반환.
  - **kill()**: 프로세스에 신호를 보내 작업 수행(예: 종료).

### **파일 관리 (File Management)**

- 파일의 생성, 삭제, 읽기, 쓰기 등을 처리.
- **예제**:
  - **open()**: 파일 열기.
  - **close()**: 파일 닫기.
  - **read()**: 파일에서 데이터 읽기.
  - **write()**: 파일에 데이터 쓰기.
  - **lseek()**: 파일의 특정 위치로 이동.
  - **unlink()**: 파일 삭제.
  - **stat()**: 파일 정보 가져오기.

---

### **3. 장치 관리 (Device Management)**

- I/O 장치의 요청 및 제어.
- **예제**:
  - **ioctl()**: 장치 제어 명령 전송.
  - **read()**: 장치에서 데이터 읽기.
  - **write()**: 장치에 데이터 쓰기.
  - **open()**: 장치를 열기 위한 파일 디스크립터 생성.
  - **close()**: 장치 파일 디스크립터 닫기.

### **4. 정보 유지 (Information Maintenance)**

- 시스템 및 프로세스 정보 획득, 시간 관리 등.
- **예제**:
  - **getpid()**: 현재 프로세스 ID 반환.
  - **getppid()**: 부모 프로세스 ID 반환.
  - **getuid()**: 사용자 ID 반환.
  - **setuid()**: 사용자 ID 설정.
  - **time()**: 현재 시간 가져오기.
  - **uname()**: 시스템 정보 획득.

---

### **5. 통신 (Communication)**

- 프로세스 간 또는 네트워크 상에서 데이터 교환.
- **예제**:
  - **pipe()**: 프로세스 간 파이프 생성.
  - **shmget()**: 공유 메모리 생성.
  - **shmat()**: 공유 메모리 연결.
  - **msgget()**: 메시지 큐 생성.
  - **send()**: 네트워크 데이터 전송.
  - **recv()**: 네트워크 데이터 수신.
  - **socket()**: 소켓 생성.
  - **connect()**: 서버 연결 요청.

---

### **시스템 콜 호출 과정**

1. **사용자 프로그램 호출**:
   - 예: `read()` 함수 호출.
2. **라이브러리 함수**:
   - 표준 C 라이브러리(glibc 등)가 내부적으로 시스템 콜 호출.
3. **커널 모드 전환**:
   - 트랩(Trap) 명령으로 커널 모드로 전환.
4. **커널에서 작업 수행**:
   - 시스템 콜에 따라 요청된 작업 수행.
5. **사용자 모드 복귀**:
   - 결과를 사용자 프로그램으로 반환.

---

### **시스템 콜의 활용 예시**

1. **파일 읽기**:

   ```c
   int fd = open("example.txt", O_RDONLY);
   read(fd, buffer, size);
   close(fd);

   ```

2. **프로세스 생성**:

   ```c
   pid_t pid = fork();
   if (pid == 0) {
       execve("/bin/ls", args, envp);
   } else {
       wait(NULL);
   }

   ```

3. **소켓 통신**:

   ```c
   int sockfd = socket(AF_INET, SOCK_STREAM, 0);
   connect(sockfd, (struct sockaddr*)&server_addr, sizeof(server_addr));
   send(sockfd, message, strlen(message), 0);
   recv(sockfd, buffer, sizeof(buffer), 0);
   close(sockfd);

   ```

---
